<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sinhala Movies Pro Dashboard</title>
<style>
/* ===== Reset & Base ===== */
*{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
body{background:#0b0b0b;color:#fff;line-height:1.4;}
a{text-decoration:none;color:inherit;}

/* ===== Header ===== */
header{display:flex;justify-content:space-between;align-items:center;padding:15px 20px;background:#111;position:sticky;top:0;z-index:100;flex-wrap:wrap;}
header .logo{font-size:1.8em;font-weight:bold;color:#ff3d3d;letter-spacing:1px;}
header nav a{margin:0 12px;color:#fff;transition:0.3s;font-weight:bold;}
header nav a:hover{color:#ff3d3d;}

/* ===== Search Bar ===== */
.search-bar { position: relative; width:200px; transition: width 0.3s ease; margin-top:5px; }
.search-bar input {
  width:100%; padding:8px 12px; border-radius:20px; border:none; outline:none;
  background:#1c1c1c; color:#fff; transition:0.3s;
}
.search-bar input::placeholder { color:#aaa; }
.search-bar input:focus { width:300px; background:#0f0f0f; box-shadow:0 0 10px #ff3d3d; }
.search-bar button {
  position:absolute; top:50%; right:5px; transform:translateY(-50%);
  border:none; background:#ff3d3d; color:#fff; padding:6px 10px; border-radius:50%; cursor:pointer; transition:0.3s;
}
.search-bar button:hover{ background:#ff5757; }

/* ===== Autocomplete Suggestions ===== */
.autocomplete-suggestions { position:absolute; top:105%; left:0; width:100%; background:#1c1c1c;
  border-radius:0 0 10px 10px; max-height:200px; overflow-y:auto; z-index:150; box-shadow:0 5px 15px rgba(0,0,0,0.5); }
.autocomplete-suggestions div { padding:8px 12px; cursor:pointer; transition:0.2s; color:#fff; }
.autocomplete-suggestions div:hover { background:#ff3d3d; color:#000; }

/* ===== Hero Slider ===== */
.slider{position:relative;overflow:hidden;height:320px;margin-top:15px;border-radius:12px;}
.slide{min-width:100%;height:320px;background-size:cover;background-position:center;transition:0.6s ease-in-out;display:flex;align-items:flex-end;padding:20px;box-shadow:inset 0 0 100px rgba(0,0,0,0.5);}
.slide h2{color:#fff;font-size:2em;text-shadow:2px 2px 6px rgba(0,0,0,0.7);}
.slider-buttons{position:absolute;top:50%;width:100%;display:flex;justify-content:space-between;transform:translateY(-50%);}
.slider-buttons button{background:rgba(0,0,0,0.5);border:none;color:#fff;font-size:1.5em;padding:10px;border-radius:5px;cursor:pointer;}
.slider-buttons button:hover{background:rgba(255,61,61,0.7);}

/* ===== Sections ===== */
section{padding:25px 20px;}
section h2{color:#ff3d3d;font-size:1.5em;margin-bottom:15px;letter-spacing:1px;}

/* ===== Movie Grid ===== */
.movie-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(180px,1fr));gap:15px;}
.card{background:#1a1a1a;border-radius:12px;overflow:hidden;cursor:pointer;transition:0.3s;position:relative;}
.card:hover{transform:scale(1.05);box-shadow:0 0 15px #ff3d3d;}
.card img{width:100%;height:260px;object-fit:cover;}
.card .info{padding:10px;}
.card .info h3{font-size:16px;color:#00ffd5;margin-bottom:4px;}
.card .info p{font-size:0.85em;color:#aaa;margin-bottom:3px;}
.card .rating{color:#ffd700;font-weight:bold;}

/* ===== Genres Tags ===== */
.genres{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0;}
.genres span{background:#ff3d3d;color:#fff;padding:4px 8px;border-radius:5px;font-size:0.8em;font-weight:bold;}

/* ===== Modal ===== */
.modal{display:none;position:fixed;inset:0;background:rgba(0,0,0,0.95);justify-content:center;align-items:center;animation:fadeIn 0.3s;z-index:200;}
@keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
.modal-content{background:#1c1c1c;width:95%;max-width:650px;border-radius:12px;padding:20px;position:relative;animation:slideUp 0.3s;overflow-y:auto;max-height:90vh;}
@keyframes slideUp{from{transform:translateY(50px);opacity:0;}to{transform:translateY(0);opacity:1;}}
.close{position:absolute;top:12px;right:15px;font-size:24px;color:#ff4c4c;cursor:pointer;transition:0.3s;}
.close:hover{transform:scale(1.2);}
.modal img{width:100%;border-radius:10px;margin-bottom:15px;}

/* ===== Buttons ===== */
.btn{display:inline-block;margin-top:10px;padding:10px 16px;background:#00ffd5;color:black;border-radius:6px;font-weight:bold;transition:0.3s;}
.btn:hover{background:#00e0c0;}

/* ===== Responsive ===== */
@media(max-width:700px){
  .card img{height:180px;}
  .slider{height:200px;}
  .slide h2{font-size:1.3em;}
  header{flex-direction:column;align-items:flex-start;}
  .search-bar input:focus{width:180px;}
}
</style>
</head>
<body>

<!-- ===== Header ===== -->
<header>
  <div class="logo">CineMax</div>
  <nav>
    <a href="home.html">Home</a>
    <a href="#">Movies</a>
    <a href="#">TV Shows</a>
    <a href="#">Genres</a>
    <a href="contact.html">Contact</a>
  </nav>
  <div class="search-bar">
    <input type="text" id="searchInput" placeholder="Search movies...">
    <button>üîç</button>
    <div class="autocomplete-suggestions" id="suggestions"></div>
  </div>
</header>

<!-- ===== Hero Slider ===== -->
<div class="slider" id="slider">
  <div class="slider-buttons">
    <button id="prev">‚ùÆ</button>
    <button id="next">‚ùØ</button>
  </div>
</div>

<!-- ===== Trending Movies ===== -->
<section>
  <h2>Trending Movies</h2>
  <div class="movie-grid" id="trendingContainer"></div>
</section>

<!-- ===== Latest Sinhala Movies ===== -->
<section>
  <h2>Latest Sinhala Movies</h2>
  <div class="movie-grid" id="latestContainer"></div>
</section>

<!-- ===== Modal ===== -->
<div class="modal" id="movieModal">
  <div class="modal-content" id="modalContent">
    <span class="close" onclick="closeModal()">‚úñ</span>
  </div>
</div>

<script>
const API_KEY="664258113a1e4067d9a47099ac78e3a4";
const IMG_PATH="https://image.tmdb.org/t/p/w500";

// ===== Slider =====
let sliderIndex=0;
const sliderContainer=document.getElementById("slider");
function showSlider(slides){
  sliderContainer.innerHTML='';
  slides.forEach((movie,i)=>{
    const div=document.createElement('div');
    div.className='slide';
    div.style.backgroundImage=`url(${IMG_PATH+movie.backdrop_path})`;
    div.innerHTML=`<h2>${movie.title}</h2>`;
    sliderContainer.appendChild(div);
  });
  sliderContainer.appendChild(document.querySelector('.slider-buttons'));
  updateSlider();
}
function updateSlider(){
  const slides=document.querySelectorAll('.slide');
  slides.forEach((s,i)=> s.style.transform=`translateX(${100*(i-sliderIndex)}%)`);
}
document.getElementById('next').addEventListener('click',()=>{ sliderIndex=(sliderIndex+1)%document.querySelectorAll('.slide').length; updateSlider(); });
document.getElementById('prev').addEventListener('click',()=>{ sliderIndex=(sliderIndex-1+document.querySelectorAll('.slide').length)%document.querySelectorAll('.slide').length; updateSlider(); });
setInterval(()=>{ sliderIndex=(sliderIndex+1)%document.querySelectorAll('.slide').length; updateSlider(); },5000);

// ===== Load Trending =====
fetch(`https://api.themoviedb.org/3/movie/popular?api_key=${API_KEY}&language=en-US&page=1`)
.then(res=>res.json())
.then(data=>{
  const container=document.getElementById("trendingContainer");
  data.results.forEach(movie=>{
    const ratingStars='‚≠ê'.repeat(Math.round(movie.vote_average/2));
    container.innerHTML+=`
      <div class="card" onclick="showDetails(${movie.id})">
        <img src="${IMG_PATH+movie.poster_path}" alt="${movie.title}">
        <div class="info">
          <h3>${movie.title}</h3>
          <p class="rating">${ratingStars} (${movie.vote_average})</p>
          <p>${movie.release_date}</p>
        </div>
      </div>
    `;
  });
  showSlider(data.results.slice(0,5));
});

// ===== Load Latest Sinhala Movies =====
fetch(`https://api.themoviedb.org/3/discover/movie?api_key=${API_KEY}&with_original_language=si&sort_by=popularity.desc`)
.then(res=>res.json())
.then(data=>{
  const container=document.getElementById("latestContainer");
  data.results.forEach(movie=>{
    const ratingStars='‚≠ê'.repeat(Math.round(movie.vote_average/2));
    container.innerHTML+=`
      <div class="card" onclick="showDetails(${movie.id})">
        <img src="${IMG_PATH+movie.poster_path}" alt="${movie.title}">
        <div class="info">
          <h3>${movie.title}</h3>
          <p class="rating">${ratingStars} (${movie.vote_average})</p>
          <p>${movie.release_date}</p>
        </div>
      </div>
    `;
  });
});

// ===== Show Modal =====
function showDetails(id){
  fetch(`https://api.themoviedb.org/3/movie/${id}?api_key=${API_KEY}&append_to_response=videos,genres`)
  .then(res=>res.json())
  .then(movie=>{
    const trailer=movie.videos.results.find(v=>v.type==="Trailer");
    const trailerUrl=trailer?`https://www.youtube.com/watch?v=${trailer.key}`:"#";
    const genres=movie.genres.map(g=>`<span>${g.name}</span>`).join(' ');
    document.getElementById("modalContent").innerHTML=`
      <span class="close" onclick="closeModal()">‚úñ</span>
      <img src="${IMG_PATH+movie.poster_path}" alt="${movie.title}">
      <h2>${movie.title}</h2>
      <div class="genres">${genres}</div>
      <p><b>Release:</b> ${movie.release_date}</p>
      <p><b>Rating:</b> ‚≠ê ${movie.vote_average}</p>
      <p>${movie.overview}</p>
      ${trailer?`<a class="btn" href="${trailerUrl}" target="_blank">‚ñ∂ Watch Trailer</a>`:""}
    `;
    document.getElementById("movieModal").style.display="flex";
  });
}
function closeModal(){document.getElementById("movieModal").style.display="none";}

// ===== Search Autocomplete =====
const searchInput = document.getElementById("searchInput");
const suggestionsDiv = document.getElementById("suggestions");
searchInput.addEventListener('input', () => {
  const query = searchInput.value;
  if(query.length < 2){ suggestionsDiv.innerHTML=''; return; }
  fetch(`https://api.themoviedb.org/3/search/movie?api_key=${API_KEY}&query=${query}`)
    .then(res=>res.json())
    .then(data=>{
      suggestionsDiv.innerHTML='';
      data.results.slice(0,5).forEach(movie=>{
        const div=document.createElement('div');
        div.textContent=movie.title;
        div.onclick=()=>{ showDetails(movie.id); suggestionsDiv.innerHTML=''; searchInput.value=''; };
        suggestionsDiv.appendChild(div);
      });
    });
});
document.addEventListener('click', e=>{
  if(!searchInput.contains(e.target)) suggestionsDiv.innerHTML='';
});
</script>
</body>
</html>
